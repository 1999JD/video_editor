import{e as u,u as g,o as m,c as p,a as i,h as l,t as f}from"./index.42effce7.js";import{u as b,s as h,a as y}from"./useRecord.bbf377a6.js";import{u as w}from"./index.64bb1697.js";const D=t=>new Promise((s,a)=>{navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then(e=>{s(e)}).catch(e=>{a(e)}):navigator.getUserMedia?navigator.getUserMedia(t,e=>{s(e)},e=>{a(e)}):a(new Error("Your browser does not support WebRTC"))}),M=t=>new Promise((s,a)=>{navigator.getDisplayMedia?navigator.getDisplayMedia(t).then(e=>{s(e)}).catch(e=>{a(e)}):navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia(t).then(e=>{s(e)}).catch(e=>{a(e)}):(t={video:{mediaSource:"screen"}},navigator.mediaDevices.getUserMedia(t).then(e=>{s(e)}).catch(e=>{a(e)}))});function _(){const t=u(null);return{stream:t,setStream:async(a,e)=>{e=e||{video:!0,audio:!1},a==="user"?t.value=await D(e):a==="display"&&(t.value=await M(e))}}}const R={class:"btn-wrap"},S={class:"btn-wrap"},E={__name:"Record",setup(t){const{stream:s,setStream:a}=_(),{blob:e,setBlob:d}=b();g();const c=w(),r=u(!1),v=async()=>{r.value?(await y(d),c.videoBlob=e,r.value=!1):(await h(s.value),r.value=!0)};return(U,o)=>(m(),p("div",null,[i("div",null,[i("video",{width:"480",height:"270",ref:n=>{try{n.srcObject=l(s)}catch{return}},autoplay:"",controls:""},null,512)]),i("div",R,[i("button",{onClick:o[0]||(o[0]=n=>l(a)("user"))},"\u53D6\u5F97\u651D\u5F71\u6A5F\u5F71\u50CF"),i("button",{onClick:o[1]||(o[1]=n=>l(a)("display"))},"\u53D6\u5F97\u87A2\u5E55\u5F71\u50CF")]),i("div",S,[i("button",{onClick:v},f(r.value?"\u7D50\u675F\u9304\u88FD":"\u958B\u59CB\u9304\u88FD"),1)])]))}};export{E as default};
